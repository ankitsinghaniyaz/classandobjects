		<footer id="footer">
			<section id="footer-message">&copy; {{.Site.Title}}. All rights reserved. Powered by <a href="http://gohugo.io" target="_blank">Hugo</a>. <a href="https://github.com/kathyqian/crisp-ghost-theme" target="_blank">Crisp</a> theme by <a href="http://kathyqian.com" target="_blank">Kathy Qian</a>.</section>
		</footer>


		<script>
		function createSidePopup() {
			// console.log("inside create popup");
			if (document.querySelectorAll('.vex').length == 0) {
				// console.log("inside if");
				vex.defaultOptions.className = 'vex-theme-bottom-right-corner';
				var vexId = vex.dialog.open({
			    message: 'Why not subscribe for more! Email Please',
			    input: [
			        '<input name="email" type="text" placeholder="jhondoe@domain.com" required />',
			    ].join(''),
			    buttons: [
			        $.extend({}, vex.dialog.buttons.YES, { text: 'Subscribe' }),
			        $.extend({}, vex.dialog.buttons.NO, { text: 'Back' })
			    ],
			    callback: function (data) {
							// console.log("in call");
			        if (!data) {
								// console.log("no data");
							}
							else {
								// console.log("in");
			            var email_value = data.email;
									var form = document.createElement("form");
									form.setAttribute('method',"post");
									form.setAttribute('action', "http://formspree.io/classandobjects@gmail.com");

									var input = document.createElement("input"); //input element, text
									input.setAttribute('type',"email");
									input.setAttribute('name',"email");
									input.value = email_value;

									form.appendChild(input);
									// console.log("form", form);
									form.submit();
			        }
							hide(document.querySelectorAll('.vex'));
			    },
				});
			}
		}

		function onScrollSubscribePopup () {
			{{ if .IsPage }}
			$(document).ready(function() {
				$(window).scroll(function(e){
					var scrollTop = $(window).scrollTop();
					var docHeight = $(document).height();
					var winHeight = $(window).height();
					var scrollPercent = (scrollTop) / (docHeight - winHeight);
					var scrollPercentRounded = Math.round(scrollPercent*100);
					// console.log("scroll", scrollPercentRounded);
					if (scrollPercentRounded > 70 && scrollPercentRounded < 80) {
						// console.log("inside 70");
						createSidePopup();
					}
				});
			});
			{{ end }}
		}
		</script>


    <script>
      (function(c,f){asyncLoader=function(i,h){i.foreach(function(k,j){e(j,d(j),h)});if(typeof h.callback=="function"){var g=setInterval(function(){if(f.readyState==="complete"){clearInterval(g);h.callback()}},10)}};var d=function(g){var h=g.split(".");return h[h.length-1]},e=function(h,i,g){switch(i){case"js":a(h,g);break;case"css":b(h);break;default:break}},a=function(i,h){var g=document.createElement("script");g.type="text/javascript";g.async=true;g.src=i;document.getElementsByTagName("head")[0].appendChild(g)},b=function(g){var h=document.createElement("link");h.type="text/css";h.rel="stylesheet";h.href=g;document.getElementsByTagName("head")[0].appendChild(h)};Array.prototype.foreach=function(h){for(var g=0;g<this.length;g++){h(g,this[g])}}})(this,document);

      var WebFontConfig={google:{families:["Open Sans:300italic,700italic,300,700","Bree+Serif"]}};
      asyncLoader([
        "//netdna.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.css",
        "//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js",
        "//cdnjs.cloudflare.com/ajax/libs/webfont/1.5.16/webfontloader.js",
        "//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"
      ],{
        callback:function(){
          asyncLoader([
						"{{.Site.BaseURL}}js/vex.combined.min.js",
						"{{.Site.BaseURL}}css/vex-theme-plain.css",
						"{{.Site.BaseURL}}css/vex-theme-bottom-right-corner.css",
            "{{.Site.BaseURL}}css/rrssb.css",
            "{{ .Site.BaseURL }}js/gist.min.js",
            "{{ .Site.BaseURL }}js/rrssb.min.js",
            "//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/default.min.css"
          ], { callback:function() {
              hljs.initHighlighting();
          }});
					onScrollSubscribePopup();
        }
      });
    </script>

		<!-- Scroll detection and subscribe form -->
		{{ if .IsPage }}

		{{ end }}

	{{with  .Site.Params.googleAnalytics }}
    <script>
    	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      	ga('create', '{{.}}', 'auto');
      	ga('send', 'pageview');
    </script>
  {{end}}
	</body>
</html>
